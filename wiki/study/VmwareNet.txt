http://tech.hexun.com/2009-03-03/115202845.html
网络进阶：VMware三种网络模式根本区别
2009年03月03日06:33　　来源： 我有话说　查看评论(2) 好文我顶(2) 　　提到VMware大家就想起了虚拟机技术，虚拟机技术在最近的几年中得到了广泛的发展，一些大型网络服务商都开始采用虚拟机技术，不仅节省了投资成本，更节约了能源的消耗。

　　提到VMware大家就想起了虚拟机技术，虚拟机技术在最近的几年中得到了广泛的发展，一些大型网络服务商都开始采用虚拟机技术，不仅节省了投资成本，更节约了能源的消耗。

　　我们知道VMware也分几种版本，普通用户最常用的就是Workstation，但是不管使用哪种版本，我们都能发现在安装过程中让我们选择网络模式。在默认情况下会选中桥接模式，但有用户会问其他模式是干什么用的?有时候选择了其他模式之后就不能上网了。今天小编就和大家一起探讨一下VMware3种网络模式的功能和通信规则。

　　我们首先说一下VMware的几个虚拟设备

　　VMnet0：用于虚拟桥接网络下的虚拟交换机

　　VMnet1：用于虚拟Host-Only网络下的虚拟交换机

　　VMnet8：用于虚拟NAT网络下的虚拟交换机

　　VMware Network Adepter VMnet1：Host用于与Host-Only虚拟网络进行通信的虚拟网卡

　　VMware Network Adepter VMnet8：Host用于与NAT虚拟网络进行通信的虚拟网卡

　　安装了VMware虚拟机后，会在网络连接对话框中多出两个虚拟网卡，

　　一.桥接网络(Bridged Networking)

　　桥接网络是指本地物理网卡和虚拟网卡通过VMnet0虚拟交换机进行桥接，物理网卡和虚拟网卡在拓扑图上处于同等地位(虚拟网卡既不是AdepterVMnet1也不是AdepterVMnet8)。

　　那么物理网卡和虚拟网卡就相当于处于同一个网段，虚拟交换机就相当于一台现实网络中的交换机。所以两个网卡的IP地址也要设置为同一网段。

　　我们看到，物理网卡和虚拟网卡的IP地址处于同一个网段，子网掩码、网关、DNS等参数都相同。两个网卡在拓扑结构中是相对独立的。

　　我们在192.168.15.111上ping192.168.15.96，结果显示两个网卡能够互相通信。如果在网络中存在DHCP服务器，那么虚拟网卡同样可以从DHCP服务器上获取IP地址。所以桥接网络模式是VMware虚拟机中最简单直接的模式。安装虚拟机时它为默认选项。

　　二.NAT模式

　　在NAT网络中，会用到VMware Network Adepter VMnet8虚拟网卡，主机上的VMwareNetworkAdepter VMnet8虚拟网卡被直接连接到VMnet8虚拟交换机上与虚拟网卡进行通信。

　　VMware NetworkAdepterVMnet8虚拟网卡的作用仅限于和VMnet8网段进行通信，它不给VMnet8网段提供路由功能，所以虚拟机虚拟一个NAT服务器，使虚拟网卡可以连接到Internet。在这种情况下，我们就可以使用端口映射功能，让访问主机80端口的请求映射到虚拟机的80端口上。

　　VMware NetworkAdepterVMnet8虚拟网卡的IP地址是在安装VMware时由系统指定生成的，我们不要修改这个数值，否则会使主机和虚拟机无法通信。

　　虚拟出来的网段和NAT模式虚拟网卡的网段是一样的，都为192.168.111.X，包括NAT服务器的IP地址也是这个网段。在安装VMware之后同样会生成一个虚拟DHCP服务器，为NAT服务器分配IP地址。

　　当主机和虚拟机进行通信的时候就会调用VMware NetworkAdepterVMnet8虚拟网卡，因为他们都在一个网段，所以通信就不成问题了。

　　实际上，VMware NetworkAdepterVMnet8虚拟网卡的作用就是为主机和虚拟机的通信提供一个接口，即使主机的物理网卡被关闭，虚拟机仍然可以连接到Internet，但是主机和虚拟机之间就不能互访了。

　　三.Host-Only模式

　　在Host-Only模式下，虚拟网络是一个全封闭的网络，它唯一能够访问的就是主机。其实Host-Only网络和NAT网络很相似，不同的地方就是Host-Only网络没有NAT服务，所以虚拟网络不能连接到Internet。主机和虚拟机之间的通信是通过VMwareNetworkAdepter VMnet1虚拟网卡来实现的。

　　同NAT一样，VMware NetworkAdepterVMnet1虚拟网卡的IP地址也是VMware系统指定的，同时生成的虚拟DHCP服务器和虚拟网卡的IP地址位于同一网段，但和物理网卡的IP地址不在同一网段。

　　Host-Only的宗旨就是建立一个与外界隔绝的内部网络，来提高内网的安全性。这个功能或许对普通用户来说没有多大意义，但大型服务商会常常利用这个功能。如果你想为VMnet1网段提供路由功能，那就需要使用RRAS，而不能使用XP或2000的ICS，因为ICS会把内网的IP地址改为192.168.0.1，但虚拟机是不会给VMnet1虚拟网卡分配这个地址的，那么主机和虚拟机之间就不能通信了。

　　综述

　　在VMware的3中网
